<!doctype html>
<html lang="kr">
<head>
<meta charset="UTF-8">
<title>Winter Snow</title>
<link href="https://fonts.googleapis.com/css2?family=Nanum+Pen+Script&family=Black+Han+Sans:wght@400;700&display=swap" rel="stylesheet">
<style>
html {
    height: 100%; /* 전체 페이지 높이 설정 */
    background-color: #f0f0f0; /* 회색 배경색 설정 */
}

body {
    margin: 0;
    padding: 0;
    height: 100%; /* 전체 페이지 높이 설정 */
    background-color: #f0f0f0; /* 회색 배경색 설정 */
}

.container {
    width: 800px; /* 컨테이너 너비 설정 */
    margin: 0 auto; /* 가운데 정렬 */
    position: relative; /* 상대 위치 설정 */
    min-height: 100vh; /* 최소 높이 설정 */
    background: url('paper_bg_02.png'); /* 종이 질감 배경 설정 */
    background-size: cover; /* 배경 이미지 커버로 설정 */
    z-index: 1; /* 컨테이너를 배경 위에 놓기 위해 z-index 설정 */
}

.header-image {
    background: url('hani_building.png') no-repeat center center;
    background-size: cover; /* 이미지 커버로 설정 */
    height: 50vh; /* 높이를 화면의 50%로 설정 */
    position: relative;
    z-index: 1; /* 이미지를 배경 위에 놓기 위해 z-index 설정 */
}

.image-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5); /* 검정색 오버레이 적용 */
    z-index: 2; /* 오버레이를 이미지 위에 놓기 위해 z-index 설정 */
}

#canv {
    position: absolute;
    top: 0;
    left: 50%;
    transform: translateX(-50%); /* 캔버스 중앙 정렬 */
    width: 800px; /* 캔버스 너비 설정 */
    height: 50vh; /* 캔버스 높이 설정 */
    pointer-events: none;
    z-index: 3; /* 눈 효과가 오버레이 위에 표시되도록 z-index 수정 */
}

.center-title {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 4; /* 제목을 눈 효과 위에 놓기 위해 z-index 설정 */
    color: yellow;
    font-size: 3em;
    text-shadow: -0.5px -0.5px 0 #000, 0.5px -0.5px 0 #000, -0.5px 0.5px 0 #000, 0.5px 0.5px 0 #000;
    font-family: 'Black Han Sans', serif;
    white-space: nowrap;
    padding: 20px 0; /* 위아래로 간격을 조절 */
    border-top: 3px solid white; /* 위에 흰 선 추가 */
    border-bottom: 3px solid white; /* 아래에 흰 선 추가 */
}

.center-content {
    position: relative; /* 상대 위치 설정 */
    z-index: 5; /* 콘텐츠를 눈 효과 위에 놓기 위해 z-index 설정 */
    text-align: center;
    padding: 20px;
}

.center-message {
    font-size: 2em; /* 메시지 글자 크기 증가 */
    color: black;
    line-height: 1em;
    font-family: 'Nanum Pen Script', cursive; /* Nanum Brush Script 폰트 적용 */
}

@media screen and (max-width: 1000px) {
    .container {
        width: 100%; /* 화면이 좁을 때 너비 조정 */
    }

    #canv {
        width: 100%; /* 캔버스 너비 조정 */
    }

    .center-title {
        font-size: 5em; /* 모바일 화면에서 글자 크기 증가 */
    }

    .center-message {
        font-size: 4em; /* 모바일 화면에서 메시지 글자 크기 증가 */
    }
}
</style>
</head>
<body>

<div class="container">
    <div class="header-image">
        <div class="image-overlay"></div>
        <canvas id="canv"></canvas>
        <div class="center-title">새해 복 많이 받으세요</div>
    </div>
    <div class="center-content">
        <div class="center-message">
            <p>당신 덕분에 올 한 해도 행복했습니다</p>
            <p>당신이 있어 올 한 해도 든든했습니다</p>
            <p>감사합니다</p>
            <p></p>
            <p>한겨레는 2024년에도</p>
            <p>더불어 행복한 세상을 꿈꾸며</p>
            <p>힘차게 뛰겠습니다</p>
            <p>새해에도 애정과 관심 듬뿍 쏟아주세요</p>
            <p></p>
            <p>갑진년 한 해</p>
            <p>행복과 평온이 가득하길 두 손 모아 기원드립니다</p>
            <p></p>
            <p>- 한겨레 사람들 드림</p>
        </div>
    </div>
</div>
    
<script type="text/javascript">
var canvas = document.getElementById('canv');
var ctx = canvas.getContext('2d');

var W = window.innerWidth;
var H = window.innerHeight;
canvas.width = W;
canvas.height = H;

var mf = 150; // 최대 눈송이 수
var flakes = [];

// 'center-title' 요소와 그 경계값을 가져옵니다.
var titleElement = document.querySelector('.center-title');
var titleRect = titleElement.getBoundingClientRect();

// 눈송이가 쌓일 글자 영역의 경계 설정
var textTopBoundary = titleRect.top - 20; // 글자 윗쪽에 여유 공간 추가
var textBottomBoundary = titleRect.bottom;
var textLeftBoundary = titleRect.left;
var textRightBoundary = titleRect.right;

// 눈송이 초기화
for (var i = 0; i < mf; i++) {
    flakes.push({
        x: Math.random() * W,
        y: Math.random() * H,
        r: Math.random() * 5 + 2, // 눈송이 반경
        d: Math.random() + 1 // 밀도
    });
}

// 눈송이 그리기 함수
function drawFlakes() {
    ctx.clearRect(0, 0, W, H);
    ctx.fillStyle = "white";
    ctx.font = "30px Arial"; // 눈송이 텍스트 폰트 설정

    for (var i = 0; i < mf; i++) {
        var f = flakes[i];
        ctx.fillText("*", f.x, f.y); // 눈송이 모양을 '*'로 변경
    }
}

// 눈송이 움직임 함수
function moveFlakes() {
    for (var i = 0; i < mf; i++) {
        var f = flakes[i];

        // 눈송이가 글자 영역의 상단 경계에 도달했는지 검사
        if (f.x > textLeftBoundary && f.x < textRightBoundary && f.y > textTopBoundary && f.y < textBottomBoundary) {
            // 눈송이의 y 좌표를 글자의 윗쪽 경계에 설정하여 '쌓임' 효과를 줍니다.
            flakes[i].y = Math.min(flakes[i].y + 1, textBottomBoundary);
        } else if (f.y > H) {
            // 화면 끝에 도달한 눈송이를 재위치
            flakes[i] = {x: Math.random() * W, y: 0, r: f.r, d: f.d};
        } else {
            // 눈송이를 하강시킴
            f.y += Math.pow(f.d, 2) + 1;
        }
    }
}

// 눈송이 업데이트 간격 설정
setInterval(function() {
    moveFlakes();
    drawFlakes();
}, 25);

// 창 크기 조정 감지 및 글자 영역 경계 재계산
window.onresize = function () {
    W = window.innerWidth;
    H = window.innerHeight;
    canvas.width = W;
    canvas.height = H;
    titleRect = titleElement.getBoundingClientRect();

    // 글자 영역 경계 재계산
    textTopBoundary = titleRect.top - 20; // 글자 윗쪽에 여유 공간 추가
    textBottomBoundary = titleRect.bottom;
    textLeftBoundary = titleRect.left;
    textRightBoundary = titleRect.right;
};
</script>
</body>
</html>
