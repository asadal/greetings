<!doctype html>
<html lang="kr">
<head>
<meta charset="UTF-8">
<title>Winter Snow</title>
<style>
body::before {
    content: '';
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: url('hani_sketch.jpg') no-repeat center center fixed; 
    background-size: cover;
    opacity: 0.5;
    z-index: -2; /* 배경 이미지 z-index */
}

body::after {
    content: '';
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0, 0, 0, 0.5); /* 검정색 오버레이 추가 */
    z-index: 0; /* 적절한 z-index 설정 */
    opacity: 0.5; /* 투명도 조절 */
    z-index: -1; /* 오버레이 z-index */
}

.center-title {
    position: absolute;
    top: 20%;
    left: 50%;
    transform: translateX(-50%);
    z-index: 1; /* 타이틀이 오버레이 위에 나타나도록 z-index 설정 */
}

.center-content {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background-color: rgba(0, 0, 0, 0.5);
    z-index: 10;
    text-align: center;
    padding: 20px;
    box-sizing: border-box; /* Ensure padding is included in width calculation */
    border-radius: 15px;
}

h2 {
    font-size: 4em;
    color: #49FBE2; /* 글자 색상을 까만색으로 설정 */
    margin: 0;
    -webkit-text-stroke: 0.5px #000000; /* 웹킷 브라우저용 텍스트 테두리 */
    text-shadow: 
        -0.5px -0.5px 0 #000000, 
         0.5px -0.5px 0 #000000,
         -0.5px 0.5px 0 #000000, 
         0.5px 0.5px 0 #000000; /* 주황색 얇은 테두리 */
}

.center-message {
    font-size: 1.5em;
    color: #ffffff;
    line-height: 1.5em;
}

#canv {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 5;
}

@media screen and (max-width: 1000px) {
    .center-title {
        top: 20%;
        left: 0;
        right: 0;
        width: 100%;
        transform: none;
        text-align: center;
    }
    .center-content {
        width: 100%; /* 메시지 박스 너비를 화면 가로 너비에 맞춤 */
        padding: 5% 10px; /* 상하 패딩을 비율로, 좌우 패딩을 고정 값으로 조정 */
        top: 50%; /* 수직 중앙 정렬 */
        left: 0; /* 왼쪽에 맞춤 */
        right: 0; /* 오른쪽에 맞춤 */
        transform: translateY(-50%); /* 수직 중앙 정렬을 위한 변환 */
        box-sizing: border-box; /* 패딩을 너비 계산에 포함 */
    }
    h2 {
        font-size: 8vw; /* 글자 크기를 화면 너비에 따라 조정 */
    }
    .center-message p {
        font-size: 4.5vw; /* 글자 크기를 화면 너비에 따라 조정 */
    }
}
</style>
</head>
<body>

<canvas id='canv'></canvas>

<div class="center-title"><h2>새해 복 많이 받으세요</h2></div>
<div class="center-content">

    <div class="center-message">
        <p>한 해 동안 한겨레신문을 사랑해주셔서 감사합니다.</p>
        <p>한겨레신문은 내년에도 정직하고 올곧은 목소리로</p>
        <p>독자 여러분을 찾아가겠습니다.</p>
        <p>새해에도 가정에 행복과 평온이 가득하길 기원합니다.</p>
        <p>- 한겨레신문 드림</p>
    </div>
</div>

<script type="text/javascript">
var canvas = document.getElementById('canv');
var ctx = canvas.getContext('2d');

var W = window.innerWidth;
var H = window.innerHeight;
canvas.width = W;
canvas.height = H;

var mf = 100; // 최대 눈송이 수
var flakes = [];
var angle = 0; // 눈송이 움직임을 위한 각도 변수 추가

// 눈송이 초기화
for (var i = 0; i < mf; i++) {
    flakes.push({
        x: Math.random() * W,
        y: Math.random() * H,
        r: Math.random() * 5 + 2, // 눈송이 반경
        d: Math.random() + 1, // 밀도
        vx: Math.random() - 0.5, // X축 벡터
        vy: Math.random() - 0.5  // Y축 벡터
    })
}

// 눈송이 그리기 함수
function drawFlakes() {
    ctx.clearRect(0, 0, W, H);
    ctx.fillStyle = "white";
    ctx.beginPath();
    for (var i = 0; i < mf; i++) {
        var f = flakes[i];
        ctx.moveTo(f.x, f.y);
        ctx.arc(f.x, f.y, f.r, 0, Math.PI * 2, true);
    }
    ctx.fill();
    moveFlakes();
}

// 마우스 위치
var mouseX = W / 2;
var mouseY = H / 2;

// 마우스 위치 감지 이벤트
document.addEventListener('mousemove', function (e) {
    mouseX = e.clientX;
    mouseY = e.clientY;
});

// 터치 위치 감지 이벤트 (모바일 대응)
document.addEventListener('touchmove', function (e) {
    if (e.touches.length == 1) {
        var touch = e.touches[0];
        mouseX = touch.pageX;
        mouseY = touch.pageY;
    }
}, false);

// 눈송이 움직임 함수
function moveFlakes() {
    angle += 0.01;
    for (var i = 0; i < mf; i++) {
        var f = flakes[i];
        // 기본 움직임 + 마우스 커서 방향 반대로 이동
        f.x += Math.sin(angle) * f.d;
        f.y += Math.pow(f.d, 2) + 1;
        
        // 마우스 커서 근처에 있을 때 반대 방향으로 이동
        var dx = f.x - mouseX;
        var dy = f.y - mouseY;
        var distance = Math.sqrt(dx * dx + dy * dy);
        if (distance < 50) {
            f.x += dx / distance;
            f.y += dy / distance;
        }

        // 화면 끝 도달 시 재위치
        if (f.x > W || f.x < 0 || f.y > H) {
            flakes[i] = {x: Math.random() * W, y: 0, r: f.r, d: f.d};
        }
    }
}

// 눈송이 업데이트 간격
setInterval(drawFlakes, 25);

// 창 크기 조정 감지
window.onresize = function () {
    W = window.innerWidth;
    H = window.innerHeight;
    canvas.width = W;
    canvas.height = H;
};
</script>
</body>
</html>
